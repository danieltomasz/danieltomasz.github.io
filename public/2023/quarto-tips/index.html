<!doctype html>
<html lang="en">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=60341&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content=" map[name:Daniel Borek] - http://localhost:60341/">
  <title>PDF tweaks and tips with Quarto | Daniel Borek</title>
  <meta name="description" content="Some tips and tricks for writing thesis with Quarto">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="PDF tweaks and tips with Quarto">
  <meta name="twitter:description" content="Some tips and tricks for writing thesis with Quarto">

<meta property="og:url" content="http://localhost:60341/2023/quarto-tips/">
  <meta property="og:site_name" content="Daniel Borek">
  <meta property="og:title" content="PDF tweaks and tips with Quarto">
  <meta property="og:description" content="Some tips and tricks for writing thesis with Quarto">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-08-04T00:00:00+00:00">
    <meta property="article:modified_time" content="2023-08-04T00:00:00+00:00">
    <meta property="article:tag" content="Quarto">
    <meta property="article:tag" content="Latex">


  <meta itemprop="name" content="PDF tweaks and tips with Quarto">
  <meta itemprop="description" content="Some tips and tricks for writing thesis with Quarto">
  <meta itemprop="datePublished" content="2023-08-04T00:00:00+00:00">
  <meta itemprop="dateModified" content="2023-08-04T00:00:00+00:00">
  <meta itemprop="wordCount" content="791">
  <meta itemprop="keywords" content="Quarto,Latex">
  <link rel="canonical" href="http://localhost:60341/2023/quarto-tips/">
  <link rel="dns-prefetch" href="https://www.google-analytics.com">
  <link href="https://www.google-analytics.com" rel="preconnect" crossorigin>
  <link rel="alternate" type="application/atom+xml" title="Daniel Borek" href="http://localhost:60341/atom.xml" />
  <link rel="alternate" type="application/json" title="Daniel Borek" href="http://localhost:60341/feed.json" />
  
  <style>*{line-height:1.6em;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,avenir next,avenir,helvetica,helvetica neue,ubuntu,roboto,noto,segoe ui,arial,sans-serif;padding:2rem;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}main{max-width:70ch;padding:2ch;margin:auto}rig header,footer{margin-top:4rem;margin-bottom:4rem}h1:first-child{margin:0}img{display:block;max-width:100%}.meta{color:#777}.meta span a{color:#777;display:inline;text-decoration:none}.divider{display:inline-block;flex:1;border-top:1px solid #ddd;margin:0 10px}.lista .meta{align-items:center;display:flex;padding-bottom:.85em}a,a:visited{color:initial}.list{list-style-type:none;padding-left:0;margin:0}.list li{margin-bottom:.5rem}time{color:#777;font-variant-numeric:tabular-nums}blockquote{border-left:2px solid #777;padding:.5rem 1rem;margin:2rem 0}table{border-collapse:collapse;text-align:left;width:100%}table th,table td{padding:10px 20px}.posts ul,header ul,footer ul{list-style:none}.posts,header ul,footer ul{padding:0}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:.7rem}.posts li a,.posts li div{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.posts li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}code,pre{color:#353535;font-family:San Francisco Mono,Monaco,consolas,lucida console,dejavu sans mono,bitstream vera sans mono,monospace;font-size:normal;border:1px solid #353535;font-size:small}code{padding:.1rem;border:none}pre{padding:.5rem;overflow-x:auto}pre code{border:none}header li,footer li{display:inline;text-transform:uppercase}header a,footer a{text-decoration:none}header ul,footer ul{justify-content:space-between;display:flex}[aria-current=page]{text-decoration:line-through}header,section,footer{padding:1rem 0}.lista li{list-style-type:none}.lista ul{display:flex;list-style-type:none}.nav{padding-top:-3em}ul{list-style-type:square}ul,ol{padding-left:1.2rem}header li,footer li{display:inline;text-transform:uppercase}header a,footer a{text-decoration:none}header ul,footer ul{justify-content:space-between;display:flex}[aria-current=page]{text-decoration:line-through}blockquote{border-left:5px solid #353535;padding-left:1rem}.posts ul,header ul,footer ul{list-style:none}.posts,header ul,footer ul{padding:0}.posts footer{padding-top:-10em}.posts li{align-items:center;display:flex;justify-content:space-between}.posts li a,.posts li div{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.posts li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}</style>

  


<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "articleSection": "posts",
    "name": "PDF tweaks and tips with Quarto",
    "headline": "PDF tweaks and tips with Quarto",
    "alternativeHeadline": "",
    "description": "Some tips and tricks for writing thesis with Quarto",
    "inLanguage": "en-us",
    "isFamilyFriendly": "true",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http:\/\/localhost:60341\/2023\/quarto-tips\/"
    },
    "author" : {
        "@type": "Person",
        "name": "Daniel Borek"
    },
    "creator" : {
        "@type": "Person",
        "name": "Daniel Borek"
    },
    "accountablePerson" : {
        "@type": "Person",
        "name": "Daniel Borek"
    },
    "copyrightHolder" : "Daniel Borek",
    "copyrightYear" : "2023",
    "dateCreated": "2023-08-04T00:00:00.00Z",
    "datePublished": "2023-08-04T00:00:00.00Z",
    "dateModified": "2023-08-04T00:00:00.00Z",
    "publisher":{
        "@type":"Organization",
        "name": "Daniel Borek",
        "url": "http://localhost:60341/",
        "logo": {
            "@type": "ImageObject",
            "url": "http:\/\/localhost:60341\/",
            "width":"32",
            "height":"32"
        }
    },
    "image": "http://localhost:60341/",
    "url" : "http:\/\/localhost:60341\/2023\/quarto-tips\/",
    "wordCount" : "791",
    "genre" : [ "Quarto" , "Latex" ],
    "keywords" : [ "Quarto" , "Latex" ]
}
</script>


</head>
<body>
<main>
      <header>
    <nav>
      
   <ul>
    
    <li>
      
      
      
      
      <a href="/" >about</a>
    </li>
  
    <li>
      
      
      
      
      <a href="/posts/" >index</a>
    </li>
  
    <li>
      
      
      
      
      <a href="/atom.xml" >rss</a>
    </li>
  
   </ul>
    </nav>
  </header>
    <hr>



  <section>

      
      <h2 itemprop="name headline">PDF tweaks and tips with Quarto</h2>
      
      

      <p class="meta">

        <time itemprop="datePublished" datetime="2023-08-04"> August 04, 2023</time> &bull;
        <a href='/tags/quarto'>Quarto</a>, <a href='/tags/latex'>Latex</a>
        
             <span class="date-info italic"> <br> Edited on 04.08.2023</span>
         
        </p>


      

      <span itemprop="articleBody">
      <p><em>Disclaimer: This is work in progress, I will be updating this post as I standardize and create a separate template/extension repository.</em></p>
<p>I wrote my master thesis in LaTeX, but given that markdown is a bit nicer to write, so I decided to switch with my PhD thesis to Markdown.<br>
I was trying with Pandoc but last year I switched to Quarto, as it is more flexible, and it is easier to customize.</p>
<h1 id="nicer-fonts-and-better-handling-of-figures">Nicer Fonts and Better Handling of Figures</h1>
<p>I am sharing with you a fragment of my <code>_quarto.yml</code> file, with some tweaks I am using to make my PDF output nicer.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#bbb"> </span><span style="color:#000080">format</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">pdf</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000080">link-citations</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic"># &lt;1&gt;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000080">number-sections</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000080">reference-section-title</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;References&#34;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000080">pdf-engine</span>:<span style="color:#bbb"> </span>xelatex<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000080">include-in-header</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span><span style="color:#000080">text</span>:<span style="color:#bbb"> </span>|<span style="color:#d14">
</span></span></span><span style="display:flex;"><span><span style="color:#d14">        \usepackage{epigraph} 
</span></span></span><span style="display:flex;"><span><span style="color:#d14">        %%
</span></span></span><span style="display:flex;"><span><span style="color:#d14">        %% Code related to fonts and how the output looks
</span></span></span><span style="display:flex;"><span><span style="color:#d14">        %%
</span></span></span><span style="display:flex;"><span><span style="color:#d14">        \usepackage{mathpazo}   % &lt;2&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">        \usepackage[T1]{fontenc}
</span></span></span><span style="display:flex;"><span><span style="color:#d14">        \usepackage[sups,osf]{fbb} % osf (or tosf) for text, not math # &lt;2&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">        \usepackage[scaled=.95]{cabin} % sans serif # &lt;2&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">        \usepackage[varqu,varl]{inconsolata} % sans serif typewriter # &lt;2&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">        %%
</span></span></span><span style="display:flex;"><span><span style="color:#d14">        %% Code related to figures in document
</span></span></span><span style="display:flex;"><span><span style="color:#d14">        %%
</span></span></span><span style="display:flex;"><span><span style="color:#d14">        \usepackage{float}  % &lt;3&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">        \graphicspath{{figures}{chapters/figures}{../figures}{chapters}} # &lt;4&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#d14">        \let\origfigure\figure
</span></span></span><span style="display:flex;"><span><span style="color:#d14">        \let\endorigfigure\endfigure
</span></span></span><span style="display:flex;"><span><span style="color:#d14">        \renewenvironment{figure}[1][2] {
</span></span></span><span style="display:flex;"><span><span style="color:#d14">            \expandafter\origfigure\expandafter[H]
</span></span></span><span style="display:flex;"><span><span style="color:#d14">        } {
</span></span></span><span style="display:flex;"><span><span style="color:#d14">            \endorigfigure
</span></span></span><span style="display:flex;"><span><span style="color:#d14">        }</span><span style="color:#bbb">        
</span></span></span></code></pre></div><p>I put number as comments, so you can better understand specific lines.</p>
<ol>
<li>Some options for PDF output (more or less self-explanatory)&gt;</li>
<li>The font use by default template are ugly format, this look similar but are nicer.</li>
<li>Forcing figures to be placed where they are in the text</li>
<li>Allowing to use figures from different folders, and allowing to use relative paths to figures.</li>
</ol>
<!--Those are setting I am using to render a working preview of a chapter.
 The final version will be using a font provided by my university: -->
<h1 id="use-profiles-to-compile-either-whole-book-or-thesis-or-single-chapter">Use Profiles to Compile either Whole Book or Thesis or Single Chapter</h1>
<p>Since quarto 1.2 profiles are introduced <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup> In my use case I have on profile <code>_quarto-thesis.yml</code> which include all chapters and preambles, and another <code>_quarto.yml</code> which I can use just to compile the current markdown file; If I want to render whole thesis I just use <code>quarto render --profile thesis</code>; you could have as many as you want of those profiles (I was procrastinating that way with different look and templates for my thesis :slight_smile: )</p>
<h1 id="roman-numbering-for-front-matter-and-arabic-for-main-matter">Roman Numbering for front Matter and Arabic for Main Matter</h1>
<p>I am inserting roman numbering for front matter and arabic for main matter.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#bbb"> </span><span style="color:#000080">format</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">pdf</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000080">include-before-body</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000080">text</span>:<span style="color:#bbb"> </span>|<span style="color:#d14">
</span></span></span><span style="display:flex;"><span><span style="color:#d14">           \pagestyle{plain}
</span></span></span><span style="display:flex;"><span><span style="color:#d14">           \pagenumbering{roman}</span><span style="color:#bbb">           
</span></span></span></code></pre></div><p>In main tex I switch back to arabic numbering:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tex" data-lang="tex"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">\pagenumbering</span><span style="color:#0086b3">{</span>arabic<span style="color:#0086b3">}</span>
</span></span></code></pre></div><h1 id="problem-with-_indexmd_-and-inserted-blank-page">Problem with <em>index.md</em> and Inserted Blank Page</h1>
<p>As you write complex project, you want might want to have separate files for each chapter.<br>
When you are using <code>quarto</code> to render your project, you could put them inside <code>index.md</code> in your root folder:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span>{{include &#34;chapters/chapter1.qmd&#34;}}
</span></span><span style="display:flex;"><span>{{include &#34;chapters/chapter2.qmd&#34;}}
</span></span></code></pre></div><p>Using <code>include</code> filter will add the content of the files to the <code>index.md</code> file when compiling.<br>
This is nice solution, but I have a problem when I want to use <code>quarto preview</code> to update and monitor resulting pdf when I change something in source files.<br>
Unfortunately, <code>quarto preview</code> does not update output <code>.pdf</code> file when files added with <code>include</code> change, so I needed to choose another solution.</p>
<p>Alternative solution is to add chapters into you <code>_quarto.yml</code> file:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#000080">project</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">output-dir</span>:<span style="color:#bbb"> </span>_output<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">execute-dir</span>:<span style="color:#bbb"> </span>file<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000080">book</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">title</span>:<span style="color:#bbb"> </span>Title of my  thesis or book<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">author</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000080">name</span>:<span style="color:#bbb"> </span>Author Name<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">chapters</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>- index.qmd<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>- chapters/chapter1.md<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>- chapters/chapter1.md<span style="color:#bbb">
</span></span></span></code></pre></div><p>I want to all of my content of to live in the &lsquo;chapters&rsquo; folder.<br>
Unfortunately currently in <code>quatro</code> users always need to include <code>index.md</code> (it makes sense when generating <code>html</code> as output, but not always when generating <code>pdf</code>).</p>
<p>I can leave the <code>index.md</code> file empty, but then I will have an empty page between my table of content and first chapter.<br>
I can include the first chapter into index.md but then we were hitting the same problem on smaller scale again.</p>
<h2 id="my-solution">My Solution</h2>
<p>By default, latex is adding a page break after each chapter, and the <code>index.md</code> file is treated as a chapter, even if empty.<br>
As a hack, I am hiding the problem by relaxing <code>\clearpage</code> behaviour in latex.</p>
<p>I am leaving my <code>index.md</code> file almost empty, I&rsquo;m just adding this latex code <sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tex" data-lang="tex"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">\let\standardclearpage\clearpage</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">\let\clearpage\relax</span> 
</span></span></code></pre></div><p>Then within my first chapter when my content start, I am returning to standard behaviour of <code>\clearpage</code>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tex" data-lang="tex"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">\let\clearpage\standardclearpage</span>
</span></span></code></pre></div><p>This way I am not adding any extra page between my table of content and first chapter, and I can use <code>quarto preview</code> to monitor my changes.<br>
In future the <code>quatro</code> behaviour might change regarding inclusion of `index.md``, you can follow discussion here:</p>
<h1 id="useful-materials">Useful Materials</h1>
<p>I just saw this post published on the blog of Cameron Patrick, it contains more useful information about writing thesis with <code>quarto</code>: <a href="https://cameronpatrick.com/post/2023/07/quarto-thesis-formatting/.">https://cameronpatrick.com/post/2023/07/quarto-thesis-formatting/.</a></p>
<p>I am personally using modified <code>quarto-thesis</code> template for my thesis, you can find it here: <a href="https://github.com/nmfs-opensci/quarto-thesis">https://github.com/nmfs-opensci/quarto-thesis</a><br>
If you don&rsquo;t use quarto, but you want to play with it, you can modify it online on the Posit virtual <code>Rstudio</code> instance <a href="https://rstudio.cloud/content/4383755">https://rstudio.cloud/content/4383755</a> (free account required)</p>
<h1 id="references">References</h1>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p><a href="https://quarto.org/docs/projects/profiles.html">Quarto - Project Profiles</a>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<p><a href="https://tex.stackexchange.com/a/176109">https://tex.stackexchange.com/a/176109</a>&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

      </span>


    </section>
    

<footer>

    
    <script src="https://giscus.app/client.js"
    data-repo="danieltomasz/danieltomasz.github.io"
    data-repo-id=""
    data-category="Comments"
    data-category-id=""
    data-mapping="title"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="bottom"
    data-theme="light"
    data-lang="en"
    data-loading="lazy"
    crossorigin="anonymous"
    async>
  </script>
    

    <nav>
    <ul>
        <li>
        © 2024
        </li>
    </ul>
    </nav>
    
</footer>

  </main>
</body>

